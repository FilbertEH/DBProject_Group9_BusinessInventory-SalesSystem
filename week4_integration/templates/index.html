{% extends "base.html" %} {% block content %}

<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
  <!-- 1. Revenue -->
  <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-green-500">
    <h3 class="text-gray-500 text-sm font-bold uppercase">Total Revenue</h3>
    <p class="text-3xl font-bold mt-2 text-gray-800">
      ${{ "%.2f"|format(stats.revenue) }}
    </p>
  </div>

  <!-- 2. Low Stock (Red Alert if > 0) -->
  <div
    class="bg-white p-6 rounded-lg shadow-md border-l-4 {% if stats.low_stock > 0 %}border-red-600 bg-red-50{% else %}border-gray-300{% endif %}"
  >
    <h3 class="text-gray-500 text-sm font-bold uppercase">Low Stock Alerts</h3>
    <p
      class="text-3xl font-bold mt-2 {% if stats.low_stock > 0 %}text-red-600{% endif %}"
    >
      {{ stats.low_stock }}
    </p>
    <span class="text-xs text-gray-500">Items below threshold</span>
  </div>

  <!-- 3. Total Items -->
  <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-blue-500">
    <h3 class="text-gray-500 text-sm font-bold uppercase">Total Products</h3>
    <p class="text-3xl font-bold mt-2 text-gray-800">{{ stats.total_items }}</p>
  </div>
</div>

<!-- RECENT ACTIVITY ROW -->
<div class="bg-white rounded-lg shadow-md p-6">
  <h3 class="text-lg font-bold mb-4 border-b pb-2">Recent Sales Activity</h3>

  {% if stats.recent_sales %}
  <table class="w-full text-left border-collapse">
    <thead>
      <tr class="text-sm text-gray-500 border-b">
        <th class="py-2">Date</th>
        <th class="py-2">Operator</th>
        <th class="py-2 text-right">Amount</th>
      </tr>
    </thead>
    <tbody>
      {% for sale in stats.recent_sales %}
      <tr class="border-b last:border-0 hover:bg-gray-50">
        <td class="py-3">{{ sale[1].strftime('%Y-%m-%d %H:%M') }}</td>
        <td class="py-3">{{ sale[2] }}</td>
        <td class="py-3 text-right font-medium">
          ${{ "%.2f"|format(sale[3]) }}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p class="text-gray-400 italic">No sales recorded yet.</p>
  {% endif %}
</div>

{% endblock %}
